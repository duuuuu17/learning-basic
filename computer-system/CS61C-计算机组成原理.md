UCcs61c-2020

# 《计算机组成原理——RISC-V》

# 计算机抽象及相关技术

## 计算机体系结构中的8个伟大思想

#### 面向摩尔定理的设计

（指的是单芯片上所继承的晶体管资源每18至24个月翻一番。）

#### 使用抽象简化设计

（使用抽象简化设计，隐藏底层细节，供高层人员使用更加简便。）

#### 加速经常性事件、

将经常性事件进行优化，且它更容易提升性能。

#### 通过并行提高性能、

在硬件层次中，更多的是并行运行，而在软件层次上，更多的是并发运行。

#### 通过流水线提高性能、

并行性的特殊场景运用。通过指令重叠执行使程序运行得更快。

#### 通过预测提高性能、

通过预测来帮助工作执行更快

#### 存储层次、

存储容量和数据传输速度匹配问题

#### 通过冗余提高可靠性

对于发生问题时，具有容错性，增加高可用性。

## 个人知识面未知点

### 集成电路：

也叫芯片，一种集成了几十个至上亿个晶体管的设备

### 数据通路：

处理器中执行算术操作的部分。

### 存储器

内存使用DRAM、高速缓存使用SRAM。

缓存的一个非技术性定义：隐藏事物的安全地方。

### 抽象

抽象最重要的一个实现是：**于硬件和底层软件之间的接口——计算机指令系统体系结构（或成体系结构）。**

计算机体系结构包含了程序员正确编写二进制机器语言程序所需的全部信息，如指令、I/O设备等。一般来说，操作系统需要封装I/O操作、存储器分配和其他低级的系统功能细节，以使得应用程序员无须关注这些细节。**提供给应用程序员的基本指令系统和操作系统接口合称为应用二进制接口( Application  BinaryInterface，ABI)。**

无论是硬件还是软件，它们都可以抽象分层多个层次，每个较低层次对高层隐藏细节。

### 晶体管

是一种受电流控制的开关。

### 性能

#### 响应时间

也叫执行时间（execution time)，是计算机**完成某任务所需的总时间**。

#### 吞吐率

也叫做带宽（bandwidth），表示**单位时间内完成的任务数量**。

#### 时钟周期数

所有计算机的构建都需要基于时钟，该时钟确定各类事件在硬件中何时发生。而这些**离散的时间间隔**被称为时钟周期数。（又称滴答数、时钟滴答数、时钟数、周期数）。

通俗来讲就是CPU完成指令所需的时钟周期个数。

##### 时钟周期

是指CPU内部的基本操作单位，也就是**CPU内部进行一次操作所需要的时间**。

##### 时钟频率（CPU主频）

$\frac{1}{时钟周期数}。$

##### 周期长度

每个时钟周期持续的时间长度。

#### CPU性能度量因素

$程序的CPU执行时间=程序的CPU时钟周期数\times时钟周期长度$，

由于$时钟周期长度=\frac{1}{时钟频率}$，

也有，$程序的CPU执行时间=\frac{程序的CPU时钟周期数}{时钟频率}$

#### 指令性能

$CPU时钟周期数=程序指令数 \times 指令平均时钟周期数$

**指令平均时钟周期数**，表示执行每条指令所需的时钟周期平均数（简称CPI）

$CPI=\frac{CPU时钟周期数}{指令数}$。

#### 经典的CPU性能公式

 $CPU时间=指令数 \times CPI \times 时钟周期长度$

也等于$CPU时间=\frac{指令数 \times CPI}{时钟频率}$ 

#### 程序执行时间：

使用真实程序的执行时间作为尺度。

$\frac{秒数}{程序}=\frac{指令数}{程序}\times\frac{时钟周期数}{指令数}\times{秒数}{时钟周期数}$



### CPU执行时间

也称CPU时间，执行某一任务在CPU上所花费的时间。

它又可以划分为：用户CPU时间（用户感受到程序的运行时间）、系统CPU时间（执行程序在操作系统上的时间），其**程序的CPU执行时间也等于两者相加。**

$CPU性能=\frac{1}{执行时间}$

#### 理解程序性能：

| 硬件或软件指标   | 影响内容              | 影响方式                                                     |
| ---------------- | --------------------- | ------------------------------------------------------------ |
| 算法             | 指令数，CPI           | 算法决定源程序执行指令的数目，从而也决定了CPU执行指令的数目。算法也可能通过使用较快或较慢的指令影响CPI。例如，当算法使用更多的除法运算时，将会导致CPI增大 |
| 编程语言         | 指令数，CPI           | 编程语言显然会影响指令数，因为编程语言中的语句必须翻译为指令，从而决定了指令数。编程语言也可影响CPI，例如，Java语言充分支持数据抽象，因此将进行间接调用，需要使用CPI较高的指令 |
| 编译器           | 指令数，CPI           | 因为编译器决定了源程序到计算机指令的翻译过程，所以编译器的效率既影响指令数又影响CPI。编译器的角色可能十分复杂,并以多种方式影响CPI |
| 指令系统体系结构 | 指令数，时钟频率，CPI | 指令系统体系结构影响CPU性能的所有三个方面，因为它影响体系结构 完成某功能所需的指令数、每条指令的周期数以及处理器的时钟频率 |

#### 有关并行的内容：

多核处理器任务同步、并行编程、基于预测的推测式执行机制、降低通信开销、提高吞吐率。







# 指令

# 计算机的算术运算

# 处理器

# 层次化存储

# 并行处理器 